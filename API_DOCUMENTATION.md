# üìñ Instagram Chatbot API Documentation

## üéØ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Instagram ‚Üí API ‚Üí AI Agents**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Instagram    ‚îÇ ‚Üê‚Üí ‚îÇ  Instagram API       ‚îÇ ‚Üê‚Üí ‚îÇ   AI Agents     ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ  (–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–æ—Ç–∞)  ‚îÇ    ‚îÇ  (–û—Ç–¥–µ–ª—å–Ω—ã–π     ‚îÇ
‚îÇ - –°–æ–æ–±—â–µ–Ω–∏—è     ‚îÇ    ‚îÇ  - –¢—Ä–∏–≥–≥–µ—Ä—ã          ‚îÇ    ‚îÇ   –ø—Ä–æ–µ–∫—Ç)       ‚îÇ
‚îÇ - –°–æ–±—ã—Ç–∏—è       ‚îÇ    ‚îÇ  - –ü—Ä–∞–≤–∏–ª–∞           ‚îÇ    ‚îÇ  - OpenAI       ‚îÇ
‚îÇ - Webhook'–∏     ‚îÇ    ‚îÇ  - –°—Ü–µ–Ω–∞—Ä–∏–∏          ‚îÇ    ‚îÇ  - Claude       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ  - –°–æ–±—ã—Ç–∏—è           ‚îÇ    ‚îÇ  - Local LLM    ‚îÇ
                       ‚îÇ  - API –¥–ª—è AI        ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ **–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

### ‚úÖ **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —á–∞—Ç-–±–æ—Ç–∞:**
- **–¢—Ä–∏–≥–≥–µ—Ä—ã**: "–ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–ª '1' ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω"
- **–°—Ü–µ–Ω–∞—Ä–∏–∏**: –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏ —Å –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏
- **–°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: NEW, ACTIVE, IN_SCENARIO, VIP
- **–®–∞–±–ª–æ–Ω—ã**: –ì–æ—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- **–°–æ–±—ã—Ç–∏—è**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

### ü§ñ **AI Agent –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- **–í–Ω–µ—à–Ω–∏–µ AI –∞–≥–µ–Ω—Ç—ã**: OpenAI, Claude, –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–æ–≤**: –ò—Å—Ç–æ—Ä–∏—è, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- **Webhook callbacks**: –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç AI
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI

## üìã **API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã**

### üéØ **–î–ª—è –≤–Ω–µ—à–Ω–∏—Ö AI –ê–≥–µ–Ω—Ç–æ–≤**

#### POST `/api/v1/ai/process-message`
**–û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π**

```json
{
  "instagram_user_id": 123456789,
  "username": "john_doe", 
  "message": "–ü—Ä–∏–≤–µ—Ç, —Ö–æ—á—É —É–∑–Ω–∞—Ç—å –æ –≤–∞—à–∏—Ö —É—Å–ª—É–≥–∞—Ö",
  "instagram_message_id": "msg_123",
  "instagram_thread_id": "thread_456"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "user_id": "uuid-user-id",
  "responses": [
    {
      "type": "send_message",
      "text": "–ü—Ä–∏–≤–µ—Ç, John! –†–∞–¥ –ø–æ–º–æ—á—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —É—Å–ª—É–≥–∞—Ö."
    },
    {
      "type": "ai_agent_call",
      "agent_url": "https://your-ai-agent.com/chat",
      "payload": {
        "user_id": "uuid",
        "message": "–ü—Ä–∏–≤–µ—Ç...",
        "context": {...}
      }
    }
  ],
  "user_state": "active",
  "processing_time_ms": 150
}
```

#### POST `/api/v1/ai/agent-response`
**–ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ AI –∞–≥–µ–Ω—Ç–∞**

```json
{
  "response": "–ö–æ–Ω–µ—á–Ω–æ! –ù–∞—à–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —É—Å–ª—É–≥–∏ –≤–∫–ª—é—á–∞—é—Ç...",
  "confidence": 0.95,
  "actions": [
    {
      "type": "send_template",
      "data": {"template_id": "services_overview"}
    }
  ],
  "user_state": "interested",
  "next_step": "show_pricing"
}
```

#### GET `/api/v1/ai/user/{user_id}/context`
**–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è AI**

**–û—Ç–≤–µ—Ç:**
```json
{
  "user_id": "uuid",
  "instagram_user_id": 123456789,
  "username": "john_doe",
  "current_state": "active",
  "collected_data": {
    "name": "John",
    "interests": ["web-design", "marketing"]
  },
  "message_history": [
    {
      "content": "–ü—Ä–∏–≤–µ—Ç",
      "sender_type": "user",
      "created_at": "2024-01-15T10:30:00Z"
    }
  ]
}
```

### üõ†Ô∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç-–±–æ—Ç–æ–º**

#### POST `/api/v1/chatbot/triggers`
**–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞**

```json
{
  "name": "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
  "trigger_type": "exact_match",
  "trigger_value": "–ø—Ä–∏–≤–µ—Ç",
  "actions": [
    {
      "type": "send_message",
      "data": {
        "text": "–ü—Ä–∏–≤–µ—Ç, {username}! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üëã"
      }
    },
    {
      "type": "set_user_state", 
      "data": {"state": "active"}
    }
  ],
  "is_active": true,
  "priority": 10
}
```

#### POST `/api/v1/chatbot/scenarios`
**–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è**

```json
{
  "name": "–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–∞–∂–∏",
  "description": "–°—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ —É—Å–ª—É–≥",
  "start_triggers": [
    {"type": "contains", "value": "–∫—É–ø–∏—Ç—å"},
    {"type": "contains", "value": "–∑–∞–∫–∞–∑–∞—Ç—å"}
  ],
  "steps": [
    {
      "name": "–£—Ç–æ—á–Ω–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π",
      "triggers": [{"type": "contains", "value": "*"}],
      "actions": [
        {
          "type": "send_message",
          "data": {"text": "–ö–∞–∫–∏–µ —É—Å–ª—É–≥–∏ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç?"}
        }
      ]
    },
    {
      "name": "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è —É—Å–ª—É–≥",
      "triggers": [{"type": "contains", "value": "*"}],
      "actions": [
        {
          "type": "send_template",
          "data": {"template_id": "services_catalog"}
        }
      ]
    }
  ]
}
```

#### POST `/api/v1/chatbot/templates`
**–°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞**

```json
{
  "name": "–ö–∞—Ç–∞–ª–æ–≥ —É—Å–ª—É–≥",
  "category": "sales",
  "template_text": "üéØ –ù–∞—à–∏ —É—Å–ª—É–≥–∏ –¥–ª—è {username}:\n\n1Ô∏è‚É£ –í–µ–±-–¥–∏–∑–∞–π–Ω - –æ—Ç 50,000‚ÇΩ\n2Ô∏è‚É£ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ - –æ—Ç 30,000‚ÇΩ\n3Ô∏è‚É£ SEO - –æ—Ç 25,000‚ÇΩ\n\n–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é —É—Å–ª—É–≥—É:",
  "template_type": "text",
  "buttons": [
    {"text": "1", "value": "web_design"},
    {"text": "2", "value": "marketing"},
    {"text": "3", "value": "seo"}
  ]
}
```

### üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

#### GET `/api/v1/chatbot/analytics/overview`
**–û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**

```json
{
  "period_days": 7,
  "total_users": 1250,
  "active_users": 347,
  "total_messages": 5240,
  "user_states": {
    "new": 125,
    "active": 892,
    "in_scenario": 233
  },
  "engagement_rate": 27.76
}
```

#### GET `/api/v1/ai/users/active`
**–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**

```json
[
  {
    "user_id": "uuid1",
    "instagram_user_id": 123456789,
    "username": "john_doe",
    "current_state": "in_scenario",
    "last_activity_at": "2024-01-15T15:30:00Z",
    "total_messages": 15
  }
]
```

## üîß **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### **–ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π —Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ**

```python
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ "—Ü–µ–Ω–∞"
trigger_data = {
    "name": "–ó–∞–ø—Ä–æ—Å —Ü–µ–Ω—ã",
    "trigger_type": "contains",
    "trigger_value": "—Ü–µ–Ω–∞",
    "actions": [
        {
            "type": "send_template",
            "data": {"template_id": "price_list"}
        }
    ]
}

response = requests.post(
    "http://localhost:8001/api/v1/chatbot/triggers",
    json=trigger_data,
    headers={"x-api-key": "neuro123"}
)
```

### **–ü—Ä–∏–º–µ—Ä 2: –°—Ü–µ–Ω–∞—Ä–∏–π —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤**

```python
scenario_data = {
    "name": "–°–±–æ—Ä –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
    "start_triggers": [
        {"type": "contains", "value": "–∫–æ–Ω—Ç–∞–∫—Ç"},
        {"type": "contains", "value": "—Å–≤—è–∑–∞—Ç—å—Å—è"}
    ],
    "steps": [
        {
            "name": "–ó–∞–ø—Ä–æ—Å –∏–º–µ–Ω–∏",
            "actions": [{"type": "send_message", "data": {"text": "–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?"}}],
            "collect_data": {"field": "name", "type": "text"}
        },
        {
            "name": "–ó–∞–ø—Ä–æ—Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞", 
            "actions": [{"type": "send_message", "data": {"text": "–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞?"}}],
            "collect_data": {"field": "phone", "type": "phone"}
        }
    ]
}
```

### **–ü—Ä–∏–º–µ—Ä 3: AI Agent –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**

```python
# –í –≤–∞—à–µ–º AI Agent –ø—Ä–æ–µ–∫—Ç–µ
@app.post("/chat")
async def ai_chat(request: dict):
    user_message = request["message"]
    context = request["context"]
    
    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ OpenAI/Claude
    ai_response = await generate_ai_response(user_message, context)
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ Instagram API
    response_data = {
        "response": ai_response,
        "confidence": 0.95,
        "actions": [
            {
                "type": "tag_user",
                "data": {"tag": "ai_assisted"}
            }
        ]
    }
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º callback –≤ Instagram API
    await send_callback(request["user_id"], response_data)
    
    return {"status": "processed"}
```

### **–ü—Ä–∏–º–µ—Ä 4: Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞**

```python
# Instagram webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
@app.post("/webhooks/instagram")  
async def instagram_webhook(data: dict):
    # –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–∞—Ç-–±–æ—Ç–æ–º
    # –¢—Ä–∏–≥–≥–µ—Ä—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è, —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
    # AI –∞–≥–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    
    return {"status": "processed"}
```

## üéØ **–¢–∏–ø—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤**

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----|----------|---------|
| `exact_match` | –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ | "–ø—Ä–∏–≤–µ—Ç" ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ "–ø—Ä–∏–≤–µ—Ç" |
| `contains` | –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç | "—Ü–µ–Ω–∞" ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ "–∫–∞–∫–∞—è —Ü–µ–Ω–∞?" |
| `starts_with` | –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å | "–∑–∞–∫–∞–∑" ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ "–∑–∞–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥—É" |
| `regex` | –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ | `\d+` ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –ª—é–±–æ–µ —á–∏—Å–ª–æ |
| `number_range` | –î–∏–∞–ø–∞–∑–æ–Ω —á–∏—Å–µ–ª | 1-10 ‚Üí —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ "5" |
| `user_state` | –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | "new" ‚Üí —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö |

## üîÑ **–¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π**

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
|-----|----------|---------------------|
| `send_message` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ | –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç |
| `send_template` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω | –ö–∞—Ç–∞–ª–æ–≥, –ø—Ä–∞–π—Å-–ª–∏—Å—Ç |
| `set_user_state` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ VIP |
| `ai_agent_call` | –í—ã–∑–≤–∞—Ç—å AI –∞–≥–µ–Ω—Ç–∞ | –°–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Üí AI |
| `go_to_step` | –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å—Ü–µ–Ω–∞—Ä–∏—é | –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∂ |
| `tag_user` | –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥ | –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è |
| `webhook_call` | –í—ã–∑–≤–∞—Ç—å webhook | –í–Ω–µ—à–Ω—è—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |

## üöÄ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**

### 1. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ó–∞–ø—É—Å–∫ —Å Docker Compose
docker-compose up -d --build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8001/health
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞

```bash
curl -X POST http://localhost:8001/api/v1/chatbot/triggers \
  -H "x-api-key: neuro123" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ",
    "trigger_type": "contains", 
    "trigger_value": "–ø—Ä–∏–≤–µ—Ç",
    "actions": [
      {
        "type": "send_message",
        "data": {"text": "–ü—Ä–∏–≤–µ—Ç! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"}
      }
    ]
  }'
```

### 3. –¢–µ—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

```bash
curl -X POST http://localhost:8001/api/v1/ai/process-message \
  -H "x-api-key: neuro123" \
  -H "Content-Type: application/json" \
  -d '{
    "instagram_user_id": 123456789,
    "username": "test_user",
    "message": "–ü—Ä–∏–≤–µ—Ç!"
  }'
```

## üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç API –∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `x-api-key`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏ —Å–æ–±—ã—Ç–∏–π
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

## üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

- **Health Check**: `/health` - —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–°–æ–±—ã—Ç–∏—è**: `/api/v1/chatbot/events` - –ª–æ–≥ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π  
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: `/api/v1/chatbot/analytics/overview` - –º–µ—Ç—Ä–∏–∫–∏
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: `/api/v1/ai/users/active` - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π **–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —á–∞—Ç-–±–æ—Ç–∞** –¥–ª—è Instagram —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö AI –∞–≥–µ–Ω—Ç–æ–≤! üéâ